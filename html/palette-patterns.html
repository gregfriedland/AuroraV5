<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.0.2.min.js"></script>
<script src="http://js.leapmotion.com/leap-0.6.2.js"></script>
<script src="kuler.js"></script>
<script src="palette.js"></script>
<script src="leds.js"></script>
<script src="patterns.js"></script>
</head>

<body>
<div id="connectionStatus"></div>
<div id="leap"></div>
<div id="palettes"></div>
<script type="text/javascript">

var numColors = 1024;
var numLeds = 104;


function getWaitTime(val, min, max) {
  var expBase = Math.pow(Math.pow(10, Math.log(max-min)), 1/255.0);
  
  return min + Math.pow(expBase, val);
}


Leap.loop(function(frame) {
  var pos = frame.pointables[0].tipPosition;
  var leapTxt = document.getElementById("leap");
  leapTxt.text(pos);
});

// Connect to a Fadecandy server running on the same computer, on the default port
// Put some connection status text in the corner of the screen
var socket = new WebSocket('ws://10.0.1.77:7890');
$('#connectionStatus').text('Connecting to fcserver...');
socket.onclose = function(event) {
    $('#connectionStatus').text('Not connected to fcserver');
}
socket.onopen = function(event) {
    $('#connectionStatus').text('Connected');
    
    paletteMgr = new PaletteManager(allBaseColors, numColors);
    drawPalettes(paletteMgr, null, 256, 3000);

    var anim = new Animator(numLeds, paletteMgr,
                            function(leds) { updateLEDs(socket, leds); });
    anim.run(RotateGradient, { waitRange:[5,50], wait:70 }, { t:0 });
}



</script>
</body>
</html>
